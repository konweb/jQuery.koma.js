"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}}();!function(){var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow),i=function(){return e&&e.call(performance)||(new Date).getTime()},t=function(){function e(n,t){_classCallCheck(this,e),this.$el=n,this.$img=this.$el.find("img"),this.imgLen=this.$img.length,this.startTime=i(),this.option=$.extend({fps:20},t),this.setup()}return _createClass(e,[{key:"setup",value:function(){this.$img.slice(1).hide(),this.imgLoad().then(this.animation.bind(this))["catch"](function(){console.log("画像読み込み失敗")})}},{key:"imgLoad",value:function(){var n=[];return this.$img.each(function(){var e=new Image;e.src=$(this).attr("src");var i=new Promise(function(n,i){e.onload=function(){n()},e.error=function(){i()}});n.push(i)}),Promise.all(n)}},{key:"animation",value:function(){n(this.animation.bind(this));var e=i(),t=Math.floor((e-this.startTime)/(1e3/this.option.fps)%this.imgLen);this.$img.hide(),this.$img.slice(t-1,t).show()}}]),e}();$.fn.koma=function(n){var e=this;return this.each(function(){new t($(e),n)})}}();